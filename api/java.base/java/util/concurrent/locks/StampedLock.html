<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (20) -->
<title>StampedLock (Java SE 20 &amp; JDK 20 [ad-hoc build])</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="description" content="declaration: module: java.base, package: java.util.concurrent.locks, class: StampedLock">
<meta name="generator" content="javadoc/ClassWriterImpl">
<meta name="keywords" content="java.util.concurrent.locks.StampedLock class">
<meta name="keywords" content="writeLock()">
<meta name="keywords" content="tryWriteLock()">
<meta name="keywords" content="writeLockInterruptibly()">
<meta name="keywords" content="readLock()">
<meta name="keywords" content="tryReadLock()">
<meta name="keywords" content="readLockInterruptibly()">
<meta name="keywords" content="tryOptimisticRead()">
<meta name="keywords" content="validate()">
<meta name="keywords" content="unlockWrite()">
<meta name="keywords" content="unlockRead()">
<meta name="keywords" content="unlock()">
<meta name="keywords" content="tryConvertToWriteLock()">
<meta name="keywords" content="tryConvertToReadLock()">
<meta name="keywords" content="tryConvertToOptimisticRead()">
<meta name="keywords" content="tryUnlockWrite()">
<meta name="keywords" content="tryUnlockRead()">
<meta name="keywords" content="isWriteLocked()">
<meta name="keywords" content="isReadLocked()">
<meta name="keywords" content="isWriteLockStamp()">
<meta name="keywords" content="isReadLockStamp()">
<meta name="keywords" content="isLockStamp()">
<meta name="keywords" content="isOptimisticReadStamp()">
<meta name="keywords" content="getReadLockCount()">
<meta name="keywords" content="toString()">
<meta name="keywords" content="asReadLock()">
<meta name="keywords" content="asWriteLock()">
<meta name="keywords" content="asReadWriteLock()">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
<script type="text/javascript" src="../../../../../script-dir/jquery-3.6.0.min.js"></script>
<script type="text/javascript" src="../../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var pathtoroot = "../../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header"><div style="padding: 6px; text-align: center; font-size: 80%; font-family: DejaVu Sans, Arial, Helvetica, sans-serif; font-weight: normal;">This specification is not final and is subject to change. Use is subject to <a href="https://www.oracle.com/java/javase/terms/license/java20speclicense.html">license terms</a>.</div>
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top"><button id="navbar-toggle-button" aria-controls="navbar-top" aria-expanded="false" aria-label="Toggle navigation links"><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span></button>
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<div class="about-language"><div style="margin-top: 9px;"><strong>Java SE 20 &amp; JDK 20</strong> <br><strong>DRAFT 20-internal-2022-07-19-1311514.jlaskey...</strong></div></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../../index.html">Overview</a></li>
<li><a href="../../../../module-summary.html">Module</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/StampedLock.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../preview-list.html">Preview</a></li>
<li><a href="../../../../../new-list.html">New</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../../help-doc.html#class">Help</a></li>
</ul>
<ul class="sub-nav-list-small">
<li>
<p>Summary:</p>
<ul>
<li>Nested</li>
<li>Field</li>
<li><a href="#constructor-summary">Constr</a></li>
<li><a href="#method-summary">Method</a></li>
</ul>
</li>
<li>
<p>Detail:</p>
<ul>
<li>Field</li>
<li><a href="#constructor-detail">Constr</a></li>
<li><a href="#method-detail">Method</a></li>
</ul>
</li>
</ul>
</div>
<div class="sub-nav">
<div id="navbar-sub-list">
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor-summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor-detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><a href="../../../../../search.html">SEARCH</a>
<input type="text" id="search-input" disabled placeholder="Search">
<input type="reset" id="reset-button" disabled value="reset">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="module-label-in-type">Module</span>&nbsp;<a href="../../../../module-summary.html">java.base</a></div>
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">java.util.concurrent.locks</a></div>
<h1 title="Class StampedLock" class="title">Class StampedLock</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="../../../lang/Object.html" title="class in java.lang">java.lang.Object</a>
<div class="inheritance">java.util.concurrent.locks.StampedLock</div>
</div>
<section class="class-description" id="class-description">
<dl class="notes">
<dt>All Implemented Interfaces:</dt>
<dd><code><a href="../../../io/Serializable.html" title="interface in java.io">Serializable</a></code></dd>
</dl>
<hr>
<div class="type-signature"><span class="modifiers">public class </span><span class="element-name type-name-label">StampedLock</span>
<span class="extends-implements">extends <a href="../../../lang/Object.html" title="class in java.lang">Object</a>
implements <a href="../../../io/Serializable.html" title="interface in java.io">Serializable</a></span></div>
<div class="block">A capability-based lock with three modes for controlling read/write
 access.  The state of a StampedLock consists of a version and mode.
 Lock acquisition methods return a stamp that represents and
 controls access with respect to a lock state; "try" versions of
 these methods may instead return the special value zero to
 represent failure to acquire access. Lock release and conversion
 methods require stamps as arguments, and fail if they do not match
 the state of the lock. The three modes are:

 <ul>

  <li><b>Writing.</b> Method <a href="#writeLock()"><code>writeLock()</code></a> possibly blocks
   waiting for exclusive access, returning a stamp that can be used
   in method <a href="#unlockWrite(long)"><code>unlockWrite(long)</code></a> to release the lock. Untimed and
   timed versions of <code>tryWriteLock</code> are also provided. When
   the lock is held in write mode, no read locks may be obtained,
   and all optimistic read validations will fail.

  <li><b>Reading.</b> Method <a href="#readLock()"><code>readLock()</code></a> possibly blocks
   waiting for non-exclusive access, returning a stamp that can be
   used in method <a href="#unlockRead(long)"><code>unlockRead(long)</code></a> to release the lock. Untimed
   and timed versions of <code>tryReadLock</code> are also provided.

  <li><b>Optimistic Reading.</b> Method <a href="#tryOptimisticRead()"><code>tryOptimisticRead()</code></a>
   returns a non-zero stamp only if the lock is not currently held in
   write mode.  Method <a href="#validate(long)"><code>validate(long)</code></a> returns true if the lock has not
   been acquired in write mode since obtaining a given stamp, in which
   case all actions prior to the most recent write lock release
   happen-before actions following the call to <code>tryOptimisticRead</code>.
   This mode can be thought of as an extremely weak version of a
   read-lock, that can be broken by a writer at any time.  The use of
   optimistic read mode for short read-only code segments often reduces
   contention and improves throughput.  However, its use is inherently
   fragile.  Optimistic read sections should only read fields and hold
   them in local variables for later use after validation. Fields read
   while in optimistic read mode may be wildly inconsistent, so usage
   applies only when you are familiar enough with data representations to
   check consistency and/or repeatedly invoke method <code>validate()</code>.
   For example, such steps are typically required when first reading an
   object or array reference, and then accessing one of its fields,
   elements or methods.

 </ul>

 <p>This class also supports methods that conditionally provide
 conversions across the three modes. For example, method <a href="#tryConvertToWriteLock(long)"><code>tryConvertToWriteLock(long)</code></a> attempts to "upgrade" a mode, returning
 a valid write stamp if (1) already in writing mode (2) in reading
 mode and there are no other readers or (3) in optimistic read mode
 and the lock is available. The forms of these methods are designed to
 help reduce some of the code bloat that otherwise occurs in
 retry-based designs.

 <p>StampedLocks are designed for use as internal utilities in the
 development of thread-safe components. Their use relies on
 knowledge of the internal properties of the data, objects, and
 methods they are protecting.  They are not reentrant, so locked
 bodies should not call other unknown methods that may try to
 re-acquire locks (although you may pass a stamp to other methods
 that can use or convert it).  The use of read lock modes relies on
 the associated code sections being side-effect-free.  Unvalidated
 optimistic read sections cannot call methods that are not known to
 tolerate potential inconsistencies.  Stamps use finite
 representations, and are not cryptographically secure (i.e., a
 valid stamp may be guessable). Stamp values may recycle after (no
 sooner than) one year of continuous operation. A stamp held without
 use or validation for longer than this period may fail to validate
 correctly.  StampedLocks are serializable, but always deserialize
 into initial unlocked state, so they are not useful for remote
 locking.

 <p>Like <a href="../Semaphore.html" title="class in java.util.concurrent"><code>Semaphore</code></a>, but unlike most
 <a href="Lock.html" title="interface in java.util.concurrent.locks"><code>Lock</code></a> implementations, StampedLocks have no notion of ownership.
 Locks acquired in one thread can be released or converted in another.

 <p>The scheduling policy of StampedLock does not consistently
 prefer readers over writers or vice versa.  All "try" methods are
 best-effort and do not necessarily conform to any scheduling or
 fairness policy. A zero return from any "try" method for acquiring
 or converting locks does not carry any information about the state
 of the lock; a subsequent invocation may succeed.

 <p>Because it supports coordinated usage across multiple lock
 modes, this class does not directly implement the <a href="Lock.html" title="interface in java.util.concurrent.locks"><code>Lock</code></a> or
 <a href="ReadWriteLock.html" title="interface in java.util.concurrent.locks"><code>ReadWriteLock</code></a> interfaces. However, a StampedLock may be
 viewed <a href="#asReadLock()"><code>asReadLock()</code></a>, <a href="#asWriteLock()"><code>asWriteLock()</code></a>, or <a href="#asReadWriteLock()"><code>asReadWriteLock()</code></a> in applications requiring only the associated
 set of functionality.

 <p><b>Memory Synchronization.</b> Methods with the effect of
 successfully locking in any mode have the same memory
 synchronization effects as a <em>Lock</em> action, as described in
 Chapter 17 of <cite>The Java Language Specification</cite>.
 Methods successfully unlocking in write mode have the same memory
 synchronization effects as an <em>Unlock</em> action.  In optimistic
 read usages, actions prior to the most recent write mode unlock action
 are guaranteed to happen-before those following a tryOptimisticRead
 only if a later validate returns true; otherwise there is no guarantee
 that the reads between tryOptimisticRead and validate obtain a
 consistent snapshot.

 <p><b>Sample Usage.</b> The following illustrates some usage idioms
 in a class that maintains simple two-dimensional points. The sample
 code illustrates some try/catch conventions even though they are
 not strictly needed here because no exceptions can occur in their
 bodies.

 <pre> <code>
 class Point {
   private double x, y;
   private final StampedLock sl = new StampedLock();

   // an exclusively locked method
   void move(double deltaX, double deltaY) {
     long stamp = sl.writeLock();
     try {
       x += deltaX;
       y += deltaY;
     } finally {
       sl.unlockWrite(stamp);
     }
   }

   // a read-only method
   // upgrade from optimistic read to read lock
   double distanceFromOrigin() {
     long stamp = sl.tryOptimisticRead();
     try {
       retryHoldingLock: for (;; stamp = sl.readLock()) {
         if (stamp == 0L)
           continue retryHoldingLock;
         // possibly racy reads
         double currentX = x;
         double currentY = y;
         if (!sl.validate(stamp))
           continue retryHoldingLock;
         return Math.hypot(currentX, currentY);
       }
     } finally {
       if (StampedLock.isReadLockStamp(stamp))
         sl.unlockRead(stamp);
     }
   }

   // upgrade from optimistic read to write lock
   void moveIfAtOrigin(double newX, double newY) {
     long stamp = sl.tryOptimisticRead();
     try {
       retryHoldingLock: for (;; stamp = sl.writeLock()) {
         if (stamp == 0L)
           continue retryHoldingLock;
         // possibly racy reads
         double currentX = x;
         double currentY = y;
         if (!sl.validate(stamp))
           continue retryHoldingLock;
         if (currentX != 0.0 || currentY != 0.0)
           break;
         stamp = sl.tryConvertToWriteLock(stamp);
         if (stamp == 0L)
           continue retryHoldingLock;
         // exclusive access
         x = newX;
         y = newY;
         return;
       }
     } finally {
       if (StampedLock.isWriteLockStamp(stamp))
         sl.unlockWrite(stamp);
     }
   }

   // upgrade read lock to write lock
   void moveIfAtOrigin2(double newX, double newY) {
     long stamp = sl.readLock();
     try {
       while (x == 0.0 &amp;&amp; y == 0.0) {
         long ws = sl.tryConvertToWriteLock(stamp);
         if (ws != 0L) {
           stamp = ws;
           x = newX;
           y = newY;
           break;
         }
         else {
           sl.unlockRead(stamp);
           stamp = sl.writeLock();
         }
       }
     } finally {
       sl.unlock(stamp);
     }
   }
 }</code></pre></div>
<dl class="notes"><dt>See <i>Java Language Specification</i>:</dt>
<dd>
<a href="https://docs.oracle.com/javase/specs/jls/se20/html/jls-17.html#jls-17.4">17.4 Memory Model</a><br></dd>
<dt>Since:</dt>
<dd>1.8</dd>
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="../../../../../serialized-form.html#java.util.concurrent.locks.StampedLock">Serialized Form</a></li>
</ul>
</dd>
</dl>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li>
<section class="constructor-summary" id="constructor-summary">
<h2>Constructor Summary</h2>
<div class="caption"><span>Constructors</span></div>
<div class="summary-table two-column-summary">
<div class="table-header col-first">Constructor</div>
<div class="table-header col-last">Description</div>
<div class="col-constructor-name even-row-color"><code><a href="#%3Cinit%3E()" class="member-name-link">StampedLock</a>()</code></div>
<div class="col-last even-row-color">
<div class="block">Creates a new lock, initially in unlocked state.</div>
</div>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab1" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab1', 3)" class="table-tab">Static Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Concrete Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel">
<div class="summary-table three-column-summary" aria-labelledby="method-summary-table-tab0">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="Lock.html" title="interface in java.util.concurrent.locks">Lock</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#asReadLock()" class="member-name-link">asReadLock</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns a plain <a href="Lock.html" title="interface in java.util.concurrent.locks"><code>Lock</code></a> view of this StampedLock in which
 the <a href="Lock.html#lock()"><code>Lock.lock()</code></a> method is mapped to <a href="#readLock()"><code>readLock()</code></a>,
 and similarly for other methods.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="ReadWriteLock.html" title="interface in java.util.concurrent.locks">ReadWriteLock</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#asReadWriteLock()" class="member-name-link">asReadWriteLock</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns a <a href="ReadWriteLock.html" title="interface in java.util.concurrent.locks"><code>ReadWriteLock</code></a> view of this StampedLock in
 which the <a href="ReadWriteLock.html#readLock()"><code>ReadWriteLock.readLock()</code></a> method is mapped to
 <a href="#asReadLock()"><code>asReadLock()</code></a>, and <a href="ReadWriteLock.html#writeLock()"><code>ReadWriteLock.writeLock()</code></a> to
 <a href="#asWriteLock()"><code>asWriteLock()</code></a>.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="Lock.html" title="interface in java.util.concurrent.locks">Lock</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#asWriteLock()" class="member-name-link">asWriteLock</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns a plain <a href="Lock.html" title="interface in java.util.concurrent.locks"><code>Lock</code></a> view of this StampedLock in which
 the <a href="Lock.html#lock()"><code>Lock.lock()</code></a> method is mapped to <a href="#writeLock()"><code>writeLock()</code></a>,
 and similarly for other methods.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>int</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getReadLockCount()" class="member-name-link">getReadLockCount</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Queries the number of read locks held for this lock.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#isLockStamp(long)" class="member-name-link">isLockStamp</a><wbr>(long&nbsp;stamp)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Tells whether a stamp represents holding a lock.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#isOptimisticReadStamp(long)" class="member-name-link">isOptimisticReadStamp</a><wbr>(long&nbsp;stamp)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Tells whether a stamp represents a successful optimistic read.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#isReadLocked()" class="member-name-link">isReadLocked</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns <code>true</code> if the lock is currently held non-exclusively.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#isReadLockStamp(long)" class="member-name-link">isReadLockStamp</a><wbr>(long&nbsp;stamp)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Tells whether a stamp represents holding a lock non-exclusively.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#isWriteLocked()" class="member-name-link">isWriteLocked</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns <code>true</code> if the lock is currently held exclusively.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#isWriteLockStamp(long)" class="member-name-link">isWriteLockStamp</a><wbr>(long&nbsp;stamp)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Tells whether a stamp represents holding a lock exclusively.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>long</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#readLock()" class="member-name-link">readLock</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Non-exclusively acquires the lock, blocking if necessary
 until available.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>long</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#readLockInterruptibly()" class="member-name-link">readLockInterruptibly</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Non-exclusively acquires the lock, blocking if necessary
 until available or the current thread is interrupted.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="../../../lang/String.html" title="class in java.lang">String</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#toString()" class="member-name-link">toString</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns a string identifying this lock, as well as its lock
 state.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>long</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#tryConvertToOptimisticRead(long)" class="member-name-link">tryConvertToOptimisticRead</a><wbr>(long&nbsp;stamp)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">If the lock state matches the given stamp then, atomically, if the stamp
 represents holding a lock, releases it and returns an
 observation stamp.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>long</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#tryConvertToReadLock(long)" class="member-name-link">tryConvertToReadLock</a><wbr>(long&nbsp;stamp)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">If the lock state matches the given stamp, atomically performs one of
 the following actions.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>long</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#tryConvertToWriteLock(long)" class="member-name-link">tryConvertToWriteLock</a><wbr>(long&nbsp;stamp)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">If the lock state matches the given stamp, atomically performs one of
 the following actions.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>long</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#tryOptimisticRead()" class="member-name-link">tryOptimisticRead</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns a stamp that can later be validated, or zero
 if exclusively locked.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>long</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#tryReadLock()" class="member-name-link">tryReadLock</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Non-exclusively acquires the lock if it is immediately available.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>long</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#tryReadLock(long,java.util.concurrent.TimeUnit)" class="member-name-link">tryReadLock</a><wbr>(long&nbsp;time,
 <a href="../TimeUnit.html" title="enum class in java.util.concurrent">TimeUnit</a>&nbsp;unit)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Non-exclusively acquires the lock if it is available within the
 given time and the current thread has not been interrupted.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#tryUnlockRead()" class="member-name-link">tryUnlockRead</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Releases one hold of the read lock if it is held, without
 requiring a stamp value.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#tryUnlockWrite()" class="member-name-link">tryUnlockWrite</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Releases the write lock if it is held, without requiring a
 stamp value.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>long</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#tryWriteLock()" class="member-name-link">tryWriteLock</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Exclusively acquires the lock if it is immediately available.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>long</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#tryWriteLock(long,java.util.concurrent.TimeUnit)" class="member-name-link">tryWriteLock</a><wbr>(long&nbsp;time,
 <a href="../TimeUnit.html" title="enum class in java.util.concurrent">TimeUnit</a>&nbsp;unit)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Exclusively acquires the lock if it is available within the
 given time and the current thread has not been interrupted.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#unlock(long)" class="member-name-link">unlock</a><wbr>(long&nbsp;stamp)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">If the lock state matches the given stamp, releases the
 corresponding mode of the lock.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#unlockRead(long)" class="member-name-link">unlockRead</a><wbr>(long&nbsp;stamp)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">If the lock state matches the given stamp, releases the
 non-exclusive lock.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#unlockWrite(long)" class="member-name-link">unlockWrite</a><wbr>(long&nbsp;stamp)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">If the lock state matches the given stamp, releases the
 exclusive lock.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#validate(long)" class="member-name-link">validate</a><wbr>(long&nbsp;stamp)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns true if the lock has not been exclusively acquired
 since issuance of the given stamp.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>long</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#writeLock()" class="member-name-link">writeLock</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Exclusively acquires the lock, blocking if necessary
 until available.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>long</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#writeLockInterruptibly()" class="member-name-link">writeLockInterruptibly</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Exclusively acquires the lock, blocking if necessary
 until available or the current thread is interrupted.</div>
</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Object">Methods declared in class&nbsp;java.lang.<a href="../../../lang/Object.html" title="class in java.lang">Object</a></h3>
<code><a href="../../../lang/Object.html#clone()">clone</a>, <a href="../../../lang/Object.html#equals(java.lang.Object)">equals</a>, <a href="../../../lang/Object.html#finalize()">finalize</a>, <a href="../../../lang/Object.html#getClass()">getClass</a>, <a href="../../../lang/Object.html#hashCode()">hashCode</a>, <a href="../../../lang/Object.html#notify()">notify</a>, <a href="../../../lang/Object.html#notifyAll()">notifyAll</a>, <a href="../../../lang/Object.html#wait()">wait</a>, <a href="../../../lang/Object.html#wait(long)">wait</a>, <a href="../../../lang/Object.html#wait(long,int)">wait</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li>
<section class="constructor-details" id="constructor-detail">
<h2>Constructor Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="&lt;init&gt;()">
<h3>StampedLock</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="element-name">StampedLock</span>()</div>
<div class="block">Creates a new lock, initially in unlocked state.</div>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="writeLock()">
<h3>writeLock</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">writeLock</span>()</div>
<div class="block">Exclusively acquires the lock, blocking if necessary
 until available.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>a write stamp that can be used to unlock or convert mode</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="tryWriteLock()">
<h3>tryWriteLock</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">tryWriteLock</span>()</div>
<div class="block">Exclusively acquires the lock if it is immediately available.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>a write stamp that can be used to unlock or convert mode,
 or zero if the lock is not available</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="tryWriteLock(long,java.util.concurrent.TimeUnit)">
<h3>tryWriteLock</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">tryWriteLock</span><wbr><span class="parameters">(long&nbsp;time,
 <a href="../TimeUnit.html" title="enum class in java.util.concurrent">TimeUnit</a>&nbsp;unit)</span>
                  throws <span class="exceptions"><a href="../../../lang/InterruptedException.html" title="class in java.lang">InterruptedException</a></span></div>
<div class="block">Exclusively acquires the lock if it is available within the
 given time and the current thread has not been interrupted.
 Behavior under timeout and interruption matches that specified
 for method <a href="Lock.html#tryLock(long,java.util.concurrent.TimeUnit)"><code>Lock.tryLock(long,TimeUnit)</code></a>.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>time</code> - the maximum time to wait for the lock</dd>
<dd><code>unit</code> - the time unit of the <code>time</code> argument</dd>
<dt>Returns:</dt>
<dd>a write stamp that can be used to unlock or convert mode,
 or zero if the lock is not available</dd>
<dt>Throws:</dt>
<dd><code><a href="../../../lang/InterruptedException.html" title="class in java.lang">InterruptedException</a></code> - if the current thread is interrupted
 before acquiring the lock</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="writeLockInterruptibly()">
<h3>writeLockInterruptibly</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">writeLockInterruptibly</span>()
                            throws <span class="exceptions"><a href="../../../lang/InterruptedException.html" title="class in java.lang">InterruptedException</a></span></div>
<div class="block">Exclusively acquires the lock, blocking if necessary
 until available or the current thread is interrupted.
 Behavior under interruption matches that specified
 for method <a href="Lock.html#lockInterruptibly()"><code>Lock.lockInterruptibly()</code></a>.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>a write stamp that can be used to unlock or convert mode</dd>
<dt>Throws:</dt>
<dd><code><a href="../../../lang/InterruptedException.html" title="class in java.lang">InterruptedException</a></code> - if the current thread is interrupted
 before acquiring the lock</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="readLock()">
<h3>readLock</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">readLock</span>()</div>
<div class="block">Non-exclusively acquires the lock, blocking if necessary
 until available.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>a read stamp that can be used to unlock or convert mode</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="tryReadLock()">
<h3>tryReadLock</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">tryReadLock</span>()</div>
<div class="block">Non-exclusively acquires the lock if it is immediately available.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>a read stamp that can be used to unlock or convert mode,
 or zero if the lock is not available</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="tryReadLock(long,java.util.concurrent.TimeUnit)">
<h3>tryReadLock</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">tryReadLock</span><wbr><span class="parameters">(long&nbsp;time,
 <a href="../TimeUnit.html" title="enum class in java.util.concurrent">TimeUnit</a>&nbsp;unit)</span>
                 throws <span class="exceptions"><a href="../../../lang/InterruptedException.html" title="class in java.lang">InterruptedException</a></span></div>
<div class="block">Non-exclusively acquires the lock if it is available within the
 given time and the current thread has not been interrupted.
 Behavior under timeout and interruption matches that specified
 for method <a href="Lock.html#tryLock(long,java.util.concurrent.TimeUnit)"><code>Lock.tryLock(long,TimeUnit)</code></a>.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>time</code> - the maximum time to wait for the lock</dd>
<dd><code>unit</code> - the time unit of the <code>time</code> argument</dd>
<dt>Returns:</dt>
<dd>a read stamp that can be used to unlock or convert mode,
 or zero if the lock is not available</dd>
<dt>Throws:</dt>
<dd><code><a href="../../../lang/InterruptedException.html" title="class in java.lang">InterruptedException</a></code> - if the current thread is interrupted
 before acquiring the lock</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="readLockInterruptibly()">
<h3>readLockInterruptibly</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">readLockInterruptibly</span>()
                           throws <span class="exceptions"><a href="../../../lang/InterruptedException.html" title="class in java.lang">InterruptedException</a></span></div>
<div class="block">Non-exclusively acquires the lock, blocking if necessary
 until available or the current thread is interrupted.
 Behavior under interruption matches that specified
 for method <a href="Lock.html#lockInterruptibly()"><code>Lock.lockInterruptibly()</code></a>.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>a read stamp that can be used to unlock or convert mode</dd>
<dt>Throws:</dt>
<dd><code><a href="../../../lang/InterruptedException.html" title="class in java.lang">InterruptedException</a></code> - if the current thread is interrupted
 before acquiring the lock</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="tryOptimisticRead()">
<h3>tryOptimisticRead</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">tryOptimisticRead</span>()</div>
<div class="block">Returns a stamp that can later be validated, or zero
 if exclusively locked.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>a valid optimistic read stamp, or zero if exclusively locked</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="validate(long)">
<h3>validate</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">validate</span><wbr><span class="parameters">(long&nbsp;stamp)</span></div>
<div class="block">Returns true if the lock has not been exclusively acquired
 since issuance of the given stamp. Always returns false if the
 stamp is zero. Always returns true if the stamp represents a
 currently held lock. Invoking this method with a value not
 obtained from <a href="#tryOptimisticRead()"><code>tryOptimisticRead()</code></a> or a locking method
 for this lock has no defined effect or result.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>stamp</code> - a stamp</dd>
<dt>Returns:</dt>
<dd><code>true</code> if the lock has not been exclusively acquired
 since issuance of the given stamp; else false</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="unlockWrite(long)">
<h3>unlockWrite</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">unlockWrite</span><wbr><span class="parameters">(long&nbsp;stamp)</span></div>
<div class="block">If the lock state matches the given stamp, releases the
 exclusive lock.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>stamp</code> - a stamp returned by a write-lock operation</dd>
<dt>Throws:</dt>
<dd><code><a href="../../../lang/IllegalMonitorStateException.html" title="class in java.lang">IllegalMonitorStateException</a></code> - if the stamp does
 not match the current state of this lock</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="unlockRead(long)">
<h3>unlockRead</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">unlockRead</span><wbr><span class="parameters">(long&nbsp;stamp)</span></div>
<div class="block">If the lock state matches the given stamp, releases the
 non-exclusive lock.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>stamp</code> - a stamp returned by a read-lock operation</dd>
<dt>Throws:</dt>
<dd><code><a href="../../../lang/IllegalMonitorStateException.html" title="class in java.lang">IllegalMonitorStateException</a></code> - if the stamp does
 not match the current state of this lock</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="unlock(long)">
<h3>unlock</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">unlock</span><wbr><span class="parameters">(long&nbsp;stamp)</span></div>
<div class="block">If the lock state matches the given stamp, releases the
 corresponding mode of the lock.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>stamp</code> - a stamp returned by a lock operation</dd>
<dt>Throws:</dt>
<dd><code><a href="../../../lang/IllegalMonitorStateException.html" title="class in java.lang">IllegalMonitorStateException</a></code> - if the stamp does
 not match the current state of this lock</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="tryConvertToWriteLock(long)">
<h3>tryConvertToWriteLock</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">tryConvertToWriteLock</span><wbr><span class="parameters">(long&nbsp;stamp)</span></div>
<div class="block">If the lock state matches the given stamp, atomically performs one of
 the following actions. If the stamp represents holding a write
 lock, returns it.  Or, if a read lock, if the write lock is
 available, releases the read lock and returns a write stamp.
 Or, if an optimistic read, returns a write stamp only if
 immediately available. This method returns zero in all other
 cases.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>stamp</code> - a stamp</dd>
<dt>Returns:</dt>
<dd>a valid write stamp, or zero on failure</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="tryConvertToReadLock(long)">
<h3>tryConvertToReadLock</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">tryConvertToReadLock</span><wbr><span class="parameters">(long&nbsp;stamp)</span></div>
<div class="block">If the lock state matches the given stamp, atomically performs one of
 the following actions. If the stamp represents holding a write
 lock, releases it and obtains a read lock.  Or, if a read lock,
 returns it. Or, if an optimistic read, acquires a read lock and
 returns a read stamp only if immediately available. This method
 returns zero in all other cases.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>stamp</code> - a stamp</dd>
<dt>Returns:</dt>
<dd>a valid read stamp, or zero on failure</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="tryConvertToOptimisticRead(long)">
<h3>tryConvertToOptimisticRead</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">tryConvertToOptimisticRead</span><wbr><span class="parameters">(long&nbsp;stamp)</span></div>
<div class="block">If the lock state matches the given stamp then, atomically, if the stamp
 represents holding a lock, releases it and returns an
 observation stamp.  Or, if an optimistic read, returns it if
 validated. This method returns zero in all other cases, and so
 may be useful as a form of "tryUnlock".</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>stamp</code> - a stamp</dd>
<dt>Returns:</dt>
<dd>a valid optimistic read stamp, or zero on failure</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="tryUnlockWrite()">
<h3>tryUnlockWrite</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">tryUnlockWrite</span>()</div>
<div class="block">Releases the write lock if it is held, without requiring a
 stamp value. This method may be useful for recovery after
 errors.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd><code>true</code> if the lock was held, else false</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="tryUnlockRead()">
<h3>tryUnlockRead</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">tryUnlockRead</span>()</div>
<div class="block">Releases one hold of the read lock if it is held, without
 requiring a stamp value. This method may be useful for recovery
 after errors.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd><code>true</code> if the read lock was held, else false</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="isWriteLocked()">
<h3>isWriteLocked</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">isWriteLocked</span>()</div>
<div class="block">Returns <code>true</code> if the lock is currently held exclusively.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd><code>true</code> if the lock is currently held exclusively</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="isReadLocked()">
<h3>isReadLocked</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">isReadLocked</span>()</div>
<div class="block">Returns <code>true</code> if the lock is currently held non-exclusively.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd><code>true</code> if the lock is currently held non-exclusively</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="isWriteLockStamp(long)">
<h3>isWriteLockStamp</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">isWriteLockStamp</span><wbr><span class="parameters">(long&nbsp;stamp)</span></div>
<div class="block">Tells whether a stamp represents holding a lock exclusively.
 This method may be useful in conjunction with
 <a href="#tryConvertToWriteLock(long)"><code>tryConvertToWriteLock(long)</code></a>, for example: <pre> <code>
 long stamp = sl.tryOptimisticRead();
 try {
   ...
   stamp = sl.tryConvertToWriteLock(stamp);
   ...
 } finally {
   if (StampedLock.isWriteLockStamp(stamp))
     sl.unlockWrite(stamp);
 }</code></pre></div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>stamp</code> - a stamp returned by a previous StampedLock operation</dd>
<dt>Returns:</dt>
<dd><code>true</code> if the stamp was returned by a successful
   write-lock operation</dd>
<dt>Since:</dt>
<dd>10</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="isReadLockStamp(long)">
<h3>isReadLockStamp</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">isReadLockStamp</span><wbr><span class="parameters">(long&nbsp;stamp)</span></div>
<div class="block">Tells whether a stamp represents holding a lock non-exclusively.
 This method may be useful in conjunction with
 <a href="#tryConvertToReadLock(long)"><code>tryConvertToReadLock(long)</code></a>, for example: <pre> <code>
 long stamp = sl.tryOptimisticRead();
 try {
   ...
   stamp = sl.tryConvertToReadLock(stamp);
   ...
 } finally {
   if (StampedLock.isReadLockStamp(stamp))
     sl.unlockRead(stamp);
 }</code></pre></div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>stamp</code> - a stamp returned by a previous StampedLock operation</dd>
<dt>Returns:</dt>
<dd><code>true</code> if the stamp was returned by a successful
   read-lock operation</dd>
<dt>Since:</dt>
<dd>10</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="isLockStamp(long)">
<h3>isLockStamp</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">isLockStamp</span><wbr><span class="parameters">(long&nbsp;stamp)</span></div>
<div class="block">Tells whether a stamp represents holding a lock.
 This method may be useful in conjunction with
 <a href="#tryConvertToReadLock(long)"><code>tryConvertToReadLock(long)</code></a> and <a href="#tryConvertToWriteLock(long)"><code>tryConvertToWriteLock(long)</code></a>,
 for example: <pre> <code>
 long stamp = sl.tryOptimisticRead();
 try {
   ...
   stamp = sl.tryConvertToReadLock(stamp);
   ...
   stamp = sl.tryConvertToWriteLock(stamp);
   ...
 } finally {
   if (StampedLock.isLockStamp(stamp))
     sl.unlock(stamp);
 }</code></pre></div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>stamp</code> - a stamp returned by a previous StampedLock operation</dd>
<dt>Returns:</dt>
<dd><code>true</code> if the stamp was returned by a successful
   read-lock or write-lock operation</dd>
<dt>Since:</dt>
<dd>10</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="isOptimisticReadStamp(long)">
<h3>isOptimisticReadStamp</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">isOptimisticReadStamp</span><wbr><span class="parameters">(long&nbsp;stamp)</span></div>
<div class="block">Tells whether a stamp represents a successful optimistic read.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>stamp</code> - a stamp returned by a previous StampedLock operation</dd>
<dt>Returns:</dt>
<dd><code>true</code> if the stamp was returned by a successful
   optimistic read operation, that is, a non-zero return from
   <a href="#tryOptimisticRead()"><code>tryOptimisticRead()</code></a> or
   <a href="#tryConvertToOptimisticRead(long)"><code>tryConvertToOptimisticRead(long)</code></a></dd>
<dt>Since:</dt>
<dd>10</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getReadLockCount()">
<h3>getReadLockCount</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">getReadLockCount</span>()</div>
<div class="block">Queries the number of read locks held for this lock. This
 method is designed for use in monitoring system state, not for
 synchronization control.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the number of read locks held</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="toString()">
<h3>toString</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="../../../lang/String.html" title="class in java.lang">String</a></span>&nbsp;<span class="element-name">toString</span>()</div>
<div class="block">Returns a string identifying this lock, as well as its lock
 state.  The state, in brackets, includes the String <code>
 "Unlocked"</code> or the String <code>"Write-locked"</code> or the String
 <code>"Read-locks:"</code> followed by the current number of
 read-locks held.</div>
<dl class="notes">
<dt>Overrides:</dt>
<dd><code><a href="../../../lang/Object.html#toString()">toString</a></code>&nbsp;in class&nbsp;<code><a href="../../../lang/Object.html" title="class in java.lang">Object</a></code></dd>
<dt>Returns:</dt>
<dd>a string identifying this lock, as well as its lock state</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="asReadLock()">
<h3>asReadLock</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="Lock.html" title="interface in java.util.concurrent.locks">Lock</a></span>&nbsp;<span class="element-name">asReadLock</span>()</div>
<div class="block">Returns a plain <a href="Lock.html" title="interface in java.util.concurrent.locks"><code>Lock</code></a> view of this StampedLock in which
 the <a href="Lock.html#lock()"><code>Lock.lock()</code></a> method is mapped to <a href="#readLock()"><code>readLock()</code></a>,
 and similarly for other methods. The returned Lock does not
 support a <a href="Condition.html" title="interface in java.util.concurrent.locks"><code>Condition</code></a>; method <a href="Lock.html#newCondition()"><code>Lock.newCondition()</code></a>
 throws <code>UnsupportedOperationException</code>.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the lock</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="asWriteLock()">
<h3>asWriteLock</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="Lock.html" title="interface in java.util.concurrent.locks">Lock</a></span>&nbsp;<span class="element-name">asWriteLock</span>()</div>
<div class="block">Returns a plain <a href="Lock.html" title="interface in java.util.concurrent.locks"><code>Lock</code></a> view of this StampedLock in which
 the <a href="Lock.html#lock()"><code>Lock.lock()</code></a> method is mapped to <a href="#writeLock()"><code>writeLock()</code></a>,
 and similarly for other methods. The returned Lock does not
 support a <a href="Condition.html" title="interface in java.util.concurrent.locks"><code>Condition</code></a>; method <a href="Lock.html#newCondition()"><code>Lock.newCondition()</code></a>
 throws <code>UnsupportedOperationException</code>.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the lock</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="asReadWriteLock()">
<h3>asReadWriteLock</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="ReadWriteLock.html" title="interface in java.util.concurrent.locks">ReadWriteLock</a></span>&nbsp;<span class="element-name">asReadWriteLock</span>()</div>
<div class="block">Returns a <a href="ReadWriteLock.html" title="interface in java.util.concurrent.locks"><code>ReadWriteLock</code></a> view of this StampedLock in
 which the <a href="ReadWriteLock.html#readLock()"><code>ReadWriteLock.readLock()</code></a> method is mapped to
 <a href="#asReadLock()"><code>asReadLock()</code></a>, and <a href="ReadWriteLock.html#writeLock()"><code>ReadWriteLock.writeLock()</code></a> to
 <a href="#asWriteLock()"><code>asWriteLock()</code></a>.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the lock</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small><a href="https://bugreport.java.com/bugreport/">Report a bug or suggest an enhancement</a><br> For further API reference and developer documentation see the <a href="https://docs.oracle.com/pls/topic/lookup?ctx=javase20&amp;id=homepage" target="_blank">Java SE Documentation</a>, which contains more detailed, developer-targeted descriptions with conceptual overviews, definitions of terms, workarounds, and working code examples. <a href="https://docs.oracle.com/en/java/javase/index.html">Other versions.</a><br> Java is a trademark or registered trademark of Oracle and/or its affiliates in the US and other countries.<br> <a href="../../../../../../legal/copyright.html">Copyright</a> &copy; 1993, 2022, Oracle and/or its affiliates, 500 Oracle Parkway, Redwood Shores, CA 94065 USA.<br>All rights reserved. Use is subject to <a href="https://www.oracle.com/java/javase/terms/license/java20speclicense.html">license terms</a> and the <a href="https://www.oracle.com/technetwork/java/redist-137594.html">documentation redistribution policy</a>. <br><strong>DRAFT 20-internal-2022-07-19-1311514.jlaskey...</strong> <!-- Version 20-internal-2022-07-19-1311514.jlaskey... --></small></p>
</footer>
</div>
</div>
</body>
</html>
